@page
@model Site.Pages.User.ChangePasswordModel
@{
    ViewData["Title"] = "Изменение пароля аккаунта";
    ViewData["NavBar"] = "true";
}

<br />
<h3>Изменение пароля аккаунта</h3>

<form onsubmit="return send()" method="post">
    <input type="hidden" name="email" value=@Model.Value.Email />
    <p>
        Пароль должен быть длиной от 6 до 256 символов. Для ввода разрешены символы английского алфавита, цифры.
    </p>
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text my-input-header" style="width: 150px;" id="basic-addon1">Новый пароль</span>
        </div>
        <input id="newPassword" class="form-control my-input" type="password" name="newpassword" value="" placeholder="Введите пароль" pattern="[A-z0-9]{6,256}" required />
    </div>
    <h6 id="passwordText" style="color: red;"></h6>
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text my-input-header" style="width: 150px;" id="basic-addon1">Еще раз</span>
        </div>
        <input id="passwordConfirm" class="form-control my-input" type="password" name="passwordconfirm" value="" placeholder="Повторите пароль" pattern="[A-z0-9]{6,256}" required />
    </div>
    <br />
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text my-input-header" style="width: 150px;" id="basic-addon1">Текущий пароль</span>
        </div>
        <input class="form-control my-input" type="password" name="currentpassword" value="" placeholder="Повторите пароль" pattern="[A-z0-9]{6,256}" required />
    </div>

    <button class="my-button" type="submit">Изменить</button>
</form>

<br />
<br />
<br />
<form method="get" action="/main">
    <button class="my-button" type="submit">Отмена</button>
</form>

<script>
    function send() {
        const password = document.getElementById('newPassword').value;
        const passwordConfirm = document.getElementById('passwordConfirm').value;

        if (password == passwordConfirm) {
            document.getElementById('passwordText').innerHTML = "";
            return true;
        }
        else {
            document.getElementById('passwordText').innerHTML = "Пароли не совпадают!";
            return false;
        }
    }
</script>
